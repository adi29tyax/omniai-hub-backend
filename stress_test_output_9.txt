============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0
rootdir: E:\omniai-studio-universe\hub-backend
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

app\tests\load\test_autodirector_load.py F                               [100%]

================================== FAILURES ===================================
___________________________ test_autodirector_load ____________________________

    @pytest.mark.asyncio
    async def test_autodirector_load():
        print("\n--- STARTING AUTO-DIRECTOR LOAD TEST (10 Concurrent) ---")
    
        # Patch all external services to avoid rate limits/costs
        with patch("app.modules.director.auto_director_service.call_gemini", new_callable=AsyncMock) as mock_gemini_auto, \
             patch("app.modules.director.breakdown_service.call_gemini", new_callable=AsyncMock) as mock_gemini_breakdown, \
             patch("app.modules.director.keyframe_service.call_gemini", new_callable=AsyncMock) as mock_gemini_keyframe, \
             patch("app.modules.director.animation_service.call_gemini", new_callable=AsyncMock) as mock_gemini_anim, \
             patch("app.modules.director.audio_service.call_gemini", new_callable=AsyncMock) as mock_gemini_audio, \
             patch("app.modules.director.sound_designer.call_gemini", new_callable=AsyncMock) as mock_gemini_sfx, \
             patch("app.modules.director.music_generator.call_gemini", new_callable=AsyncMock) as mock_gemini_bgm, \
             patch("app.storage.r2.upload_stream_to_r2") as mock_upload_stream, \
             patch("app.modules.director.timeline_service.upload_public") as mock_upload_public, \
             patch("app.modules.director.ffmpeg_worker.compile_timeline", new_callable=AsyncMock) as mock_ffmpeg, \
             patch("app.modules.director.model_workers.call_sfx_gen", new_callable=AsyncMock) as mock_sfx_gen, \
             patch("app.modules.director.model_workers.call_music_gen", new_callable=AsyncMock) as mock_music_gen:
    
            # Configure Mocks to return valid JSON always
            mock_gemini_auto.return_value = MOCK_STORY_JSON
            mock_gemini_breakdown.return_value = MOCK_BREAKDOWN_JSON
            mock_gemini_keyframe.return_value = MOCK_KEYFRAME_JSON
            mock_gemini_anim.return_value = MOCK_KEYFRAME_JSON
>           async with AsyncClient(transport=ASGITransport(app=app), base_url="http://test") as ac:
                       ^^^^^^^^^^^
E           NameError: name 'AsyncClient' is not defined

app\tests\load\test_autodirector_load.py:61: NameError
---------------------------- Captured stdout call -----------------------------

--- STARTING AUTO-DIRECTOR LOAD TEST (10 Concurrent) ---
============================== warnings summary ===============================
app\config.py:3
  E:\omniai-studio-universe\hub-backend\app\config.py:3: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

app\modules\director\schemas.py:14
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:14: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DirectorProjectResponse(DirectorProjectBase):

app\modules\director\schemas.py:33
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:33: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DirectorStoryResponse(DirectorStoryBase):

app\modules\director\schemas.py:53
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:53: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CharacterResponse(CharacterBase):

app\modules\director\schemas.py:71
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:71: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SceneResponse(SceneBase):

app\modules\director\schemas.py:89
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:89: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ShotResponse(ShotBase):

app\modules\director\schemas.py:112
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:112: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AssetResponse(AssetBase):

app\modules\projects\schema.py:16
  E:\omniai-studio-universe\hub-backend\app\modules\projects\schema.py:16: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ProjectResponse(BaseModel):

app\modules\project_files\schema.py:17
  E:\omniai-studio-universe\hub-backend\app\modules\project_files\schema.py:17: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FileResponse(BaseModel):

app\modules\project_files\schema.py:30
  E:\omniai-studio-universe\hub-backend\app\modules\project_files\schema.py:30: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FileTreeItem(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED app/tests/load/test_autodirector_load.py::test_autodirector_load - Nam...
======================= 1 failed, 10 warnings in 3.41s ========================
============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0
rootdir: E:\omniai-studio-universe\hub-backend
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

app\tests\load\test_ffmpeg_stress.py .                                   [100%]

============================== 1 passed in 0.33s ==============================
============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0
rootdir: E:\omniai-studio-universe\hub-backend
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

app\tests\load\test_r2_upload_stress.py .                                [100%]

============================== warnings summary ===============================
app\config.py:3
  E:\omniai-studio-universe\hub-backend\app\config.py:3: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 1 passed, 1 warning in 0.39s =========================
============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0
rootdir: E:\omniai-studio-universe\hub-backend
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

app\tests\load\test_timeline_batch.py F                                  [100%]

================================== FAILURES ===================================
_____________________________ test_timeline_batch _____________________________

    @pytest.mark.asyncio
    async def test_timeline_batch():
        print("\n--- STARTING TIMELINE BATCH TEST (30 Concurrent) ---")
    
        # Mock ffmpeg and R2
        with patch("app.modules.director.ffmpeg_worker.compile_timeline", new_callable=AsyncMock) as mock_ffmpeg, \
             patch("app.modules.director.timeline_service.upload_public") as mock_upload:
    
            mock_ffmpeg.return_value = {"status": "success", "output_path": "out.mp4", "temp_dir": "/tmp/mock_dir"}
            mock_upload.return_value = {"url": "http://mock/video.mp4", "key": "video.mp4"}
    
            async def run_timeline_build(i):
                # Create a dummy request
                request = schemas.TimelineRequest(
                    project_id=f"123e4567-e89b-12d3-a456-4266141740{i:02d}", # Valid UUID-like
                    episode_title=f"Timeline Test {i}",
                    layers=[],
                    scene_order=[]
                )
    
                # We need a mock DB session
                mock_db = MagicMock()
    
                try:
                    # We are testing the service logic orchestration
                    result = await timeline_service.compile_episode(mock_db, request)
                    return result.episode_url is not None
                except Exception as e:
                    print(f"Timeline {i} failed: {e}")
                    return False
    
            tasks = [run_timeline_build(i) for i in range(30)]
            results = await asyncio.gather(*tasks)
    
            success_count = sum(results)
            print(f"Success: {success_count}/30")
>           assert success_count == 30
E           assert 0 == 30

app\tests\load\test_timeline_batch.py:48: AssertionError
---------------------------- Captured stdout call -----------------------------

--- STARTING TIMELINE BATCH TEST (30 Concurrent) ---
2025-11-30 14:19:44,762 - omnistudio - INFO - Compiling episode 'Timeline Test 0' for project 123e4567-e89b-12d3-a456-426614174000
Timeline 0 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,763 - omnistudio - INFO - Compiling episode 'Timeline Test 1' for project 123e4567-e89b-12d3-a456-426614174001
Timeline 1 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,763 - omnistudio - INFO - Compiling episode 'Timeline Test 2' for project 123e4567-e89b-12d3-a456-426614174002
Timeline 2 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,799 - omnistudio - INFO - Compiling episode 'Timeline Test 3' for project 123e4567-e89b-12d3-a456-426614174003
Timeline 3 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,800 - omnistudio - INFO - Compiling episode 'Timeline Test 4' for project 123e4567-e89b-12d3-a456-426614174004
Timeline 4 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,801 - omnistudio - INFO - Compiling episode 'Timeline Test 5' for project 123e4567-e89b-12d3-a456-426614174005
Timeline 5 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,801 - omnistudio - INFO - Compiling episode 'Timeline Test 6' for project 123e4567-e89b-12d3-a456-426614174006
Timeline 6 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,802 - omnistudio - INFO - Compiling episode 'Timeline Test 7' for project 123e4567-e89b-12d3-a456-426614174007
Timeline 7 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,803 - omnistudio - INFO - Compiling episode 'Timeline Test 8' for project 123e4567-e89b-12d3-a456-426614174008
Timeline 8 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,803 - omnistudio - INFO - Compiling episode 'Timeline Test 9' for project 123e4567-e89b-12d3-a456-426614174009
Timeline 9 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,804 - omnistudio - INFO - Compiling episode 'Timeline Test 10' for project 123e4567-e89b-12d3-a456-426614174010
Timeline 10 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,804 - omnistudio - INFO - Compiling episode 'Timeline Test 11' for project 123e4567-e89b-12d3-a456-426614174011
Timeline 11 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,805 - omnistudio - INFO - Compiling episode 'Timeline Test 12' for project 123e4567-e89b-12d3-a456-426614174012
Timeline 12 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,805 - omnistudio - INFO - Compiling episode 'Timeline Test 13' for project 123e4567-e89b-12d3-a456-426614174013
Timeline 13 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,806 - omnistudio - INFO - Compiling episode 'Timeline Test 14' for project 123e4567-e89b-12d3-a456-426614174014
Timeline 14 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,806 - omnistudio - INFO - Compiling episode 'Timeline Test 15' for project 123e4567-e89b-12d3-a456-426614174015
Timeline 15 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,807 - omnistudio - INFO - Compiling episode 'Timeline Test 16' for project 123e4567-e89b-12d3-a456-426614174016
Timeline 16 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,808 - omnistudio - INFO - Compiling episode 'Timeline Test 17' for project 123e4567-e89b-12d3-a456-426614174017
Timeline 17 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,809 - omnistudio - INFO - Compiling episode 'Timeline Test 18' for project 123e4567-e89b-12d3-a456-426614174018
Timeline 18 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,811 - omnistudio - INFO - Compiling episode 'Timeline Test 19' for project 123e4567-e89b-12d3-a456-426614174019
Timeline 19 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,811 - omnistudio - INFO - Compiling episode 'Timeline Test 20' for project 123e4567-e89b-12d3-a456-426614174020
Timeline 20 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,812 - omnistudio - INFO - Compiling episode 'Timeline Test 21' for project 123e4567-e89b-12d3-a456-426614174021
Timeline 21 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,812 - omnistudio - INFO - Compiling episode 'Timeline Test 22' for project 123e4567-e89b-12d3-a456-426614174022
Timeline 22 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,812 - omnistudio - INFO - Compiling episode 'Timeline Test 23' for project 123e4567-e89b-12d3-a456-426614174023
Timeline 23 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,812 - omnistudio - INFO - Compiling episode 'Timeline Test 24' for project 123e4567-e89b-12d3-a456-426614174024
Timeline 24 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,813 - omnistudio - INFO - Compiling episode 'Timeline Test 25' for project 123e4567-e89b-12d3-a456-426614174025
Timeline 25 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,813 - omnistudio - INFO - Compiling episode 'Timeline Test 26' for project 123e4567-e89b-12d3-a456-426614174026
Timeline 26 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,814 - omnistudio - INFO - Compiling episode 'Timeline Test 27' for project 123e4567-e89b-12d3-a456-426614174027
Timeline 27 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,814 - omnistudio - INFO - Compiling episode 'Timeline Test 28' for project 123e4567-e89b-12d3-a456-426614174028
Timeline 28 failed: [Errno 2] No such file or directory: 'out.mp4'
2025-11-30 14:19:44,815 - omnistudio - INFO - Compiling episode 'Timeline Test 29' for project 123e4567-e89b-12d3-a456-426614174029
Timeline 29 failed: [Errno 2] No such file or directory: 'out.mp4'
Success: 0/30
------------------------------ Captured log call ------------------------------
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 0' for project 123e4567-e89b-12d3-a456-426614174000
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 1' for project 123e4567-e89b-12d3-a456-426614174001
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 2' for project 123e4567-e89b-12d3-a456-426614174002
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 3' for project 123e4567-e89b-12d3-a456-426614174003
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 4' for project 123e4567-e89b-12d3-a456-426614174004
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 5' for project 123e4567-e89b-12d3-a456-426614174005
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 6' for project 123e4567-e89b-12d3-a456-426614174006
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 7' for project 123e4567-e89b-12d3-a456-426614174007
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 8' for project 123e4567-e89b-12d3-a456-426614174008
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 9' for project 123e4567-e89b-12d3-a456-426614174009
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 10' for project 123e4567-e89b-12d3-a456-426614174010
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 11' for project 123e4567-e89b-12d3-a456-426614174011
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 12' for project 123e4567-e89b-12d3-a456-426614174012
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 13' for project 123e4567-e89b-12d3-a456-426614174013
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 14' for project 123e4567-e89b-12d3-a456-426614174014
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 15' for project 123e4567-e89b-12d3-a456-426614174015
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 16' for project 123e4567-e89b-12d3-a456-426614174016
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 17' for project 123e4567-e89b-12d3-a456-426614174017
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 18' for project 123e4567-e89b-12d3-a456-426614174018
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 19' for project 123e4567-e89b-12d3-a456-426614174019
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 20' for project 123e4567-e89b-12d3-a456-426614174020
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 21' for project 123e4567-e89b-12d3-a456-426614174021
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 22' for project 123e4567-e89b-12d3-a456-426614174022
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 23' for project 123e4567-e89b-12d3-a456-426614174023
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 24' for project 123e4567-e89b-12d3-a456-426614174024
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 25' for project 123e4567-e89b-12d3-a456-426614174025
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 26' for project 123e4567-e89b-12d3-a456-426614174026
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 27' for project 123e4567-e89b-12d3-a456-426614174027
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 28' for project 123e4567-e89b-12d3-a456-426614174028
INFO     omnistudio:timeline_service.py:9 Compiling episode 'Timeline Test 29' for project 123e4567-e89b-12d3-a456-426614174029
============================== warnings summary ===============================
app\config.py:3
  E:\omniai-studio-universe\hub-backend\app\config.py:3: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

app\modules\director\schemas.py:14
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:14: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DirectorProjectResponse(DirectorProjectBase):

app\modules\director\schemas.py:33
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:33: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DirectorStoryResponse(DirectorStoryBase):

app\modules\director\schemas.py:53
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:53: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CharacterResponse(CharacterBase):

app\modules\director\schemas.py:71
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:71: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SceneResponse(SceneBase):

app\modules\director\schemas.py:89
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:89: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ShotResponse(ShotBase):

app\modules\director\schemas.py:112
  E:\omniai-studio-universe\hub-backend\app\modules\director\schemas.py:112: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AssetResponse(AssetBase):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED app/tests/load/test_timeline_batch.py::test_timeline_batch - assert 0 ...
======================== 1 failed, 7 warnings in 1.48s ========================
============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0
rootdir: E:\omniai-studio-universe\hub-backend
plugins: anyio-4.11.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

app\tests\load\test_ai_worker_stress.py .                                [100%]

============================= 1 passed in 49.75s ==============================
--- STARTING PHASE 9.4 LOAD & STRESS TESTS ---

[1/5] Running Auto-Director Load Test...
WARNING: High Memory Usage: 87.0%
WARNING: High Memory Usage: 87.5%
WARNING: High Memory Usage: 87.6%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 87.9%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.4%
WARNING: High Memory Usage: 90.5%
WARNING: High Memory Usage: 90.4%
WARNING: High Memory Usage: 91.1%
Time: 4.84s

[2/5] Running FFmpeg Stress Test...
WARNING: High Memory Usage: 90.5%
WARNING: High Memory Usage: 90.4%
Time: 1.43s

[3/5] Running R2 Upload Stress Test...
WARNING: High Memory Usage: 90.3%
WARNING: High Memory Usage: 90.2%
WARNING: High Memory Usage: 90.5%
Time: 1.24s

[4/5] Running Timeline Batch Test...
WARNING: High Memory Usage: 90.1%
WARNING: High Memory Usage: 90.2%
WARNING: High Memory Usage: 90.8%
WARNING: High Memory Usage: 90.8%
WARNING: High Memory Usage: 90.8%
Time: 2.39s

[5/5] Running AI Worker Stress Test...
WARNING: High Memory Usage: 90.3%
WARNING: High Memory Usage: 90.4%
WARNING: High Memory Usage: 90.5%
WARNING: High Memory Usage: 90.5%
WARNING: High Memory Usage: 90.2%
WARNING: High Memory Usage: 90.2%
WARNING: High Memory Usage: 89.8%
WARNING: High Memory Usage: 89.8%
WARNING: High Memory Usage: 89.8%
WARNING: High Memory Usage: 89.9%
WARNING: High Memory Usage: 89.9%
WARNING: High Memory Usage: 89.8%
WARNING: High Memory Usage: 89.6%
WARNING: High Memory Usage: 89.5%
WARNING: High Memory Usage: 89.4%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.0%
WARNING: High Memory Usage: 89.0%
WARNING: High Memory Usage: 88.9%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.1%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 89.2%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 87.9%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.0%
WARNING: High Memory Usage: 88.1%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.2%
WARNING: High Memory Usage: 88.3%
WARNING: High Memory Usage: 88.5%
WARNING: High Memory Usage: 88.5%
WARNING: High Memory Usage: 88.5%
WARNING: High Memory Usage: 88.5%
Time: 50.37s

--- PHASE 9.4 LOAD & STRESS TEST COMPLETE ---

Summary:
{
  "results": {
    "autodirector": "FAIL",
    "ffmpeg": "PASS",
    "r2_upload": "PASS",
    "timeline": "FAIL",
    "ai_worker": "PASS"
  },
  "resources": {
    "cpu_max": 98.6,
    "cpu_avg": 56.641666666666666,
    "memory_max": 91.1,
    "memory_avg": 88.99083333333334,
    "disk_max": 5.5
  }
}
